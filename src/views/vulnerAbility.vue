<template>

  <div class="VA">
    <el-row>
      <el-col :span="24">
        <el-card class="box-card">
          <el-button type="primary">对当前工程进行漏洞检索</el-button>
          <span style="margin-left: 10px">{{'当前工程ID : '+projectId}}</span>
        </el-card>
      </el-col>
      <el-col :span="24" style="margin-top: 20px">
        <el-card class="box-card">
          <h3>近期主要漏洞</h3>
          <el-table
              :data="vulnerabilityList"
              stripe
              style="width: 100%">
            <el-table-column
                prop="vulnId"
                label="漏洞编号"
                width="180">
            </el-table-column>
            <el-table-column
                prop="description"
                label="漏洞描述"
                width="180">
            </el-table-column>
            <el-table-column
                prop="references"
                label="相关链接">
            </el-table-column>
            <el-table-column
                prop="published"
                label="上传时间">
            </el-table-column>
            <el-table-column
                prop="updated"
                label="最后更新时间">
            </el-table-column>
          </el-table>
        </el-card>
      </el-col>
    </el-row>
  </div>


</template>

<script>
import {getData, getProjectStatus} from "@/api";
import request from "@/utils/request";
import Cookie from "js-cookie";
import http from "@/utils/request";

export default {

  data: function () {
    return {
      projectId:Cookie.get('projectId'),
      vulnerabilityList:[],
      licenseGroupList:[],
      projectLoudongList:[],
      componentList:[],
      currentMetricsList:[],
      allProjectResult:[],
      refresh:[]
    };
  },
  methods: {



    getList(){
      http.get('http://192.168.159.240:25005/uranus/vulnerability').then(({data})=>{
        //近期重要漏洞（查询工程漏洞）
        this.vulnerabilityList=data.data;
      })
      http.post('http://192.168.159.240:25005/uranus/finding/project/analyze'+'?uuid='+'4cea96fc-e50f-4839-8ec8-0c114497d73b').then(({data})=>{
        //对指定工程进行漏洞分析
      })
      http.get('http://192.168.159.240:25005/uranus/licenseGroup').then(({data})=>{
        //查询开源协议列表（简化版）
      })
      http.get('http://192.168.159.240:25005/uranus/project').then(({data})=>{
        //查询工程漏洞列表（简化版）
      })
      http.get('http://192.168.159.240:25005/uranus/component/project'+'?uuid='+'4cea96fc-e50f-4839-8ec8-0c114497d73b').then(({data})=>{
        //查询指定工程所使用组件列表
      })
      http.get('http://192.168.159.240:25005/uranus/metrics/project/current'+'?uuid='+'4cea96fc-e50f-4839-8ec8-0c114497d73b').then(({data})=>{
        //查询指定工程当前指标
      })
      http.get('http://192.168.159.240:25005/uranus/finding/project'+'?uuid='+'4cea96fc-e50f-4839-8ec8-0c114497d73b').then(({data})=>{
        //返回指定工程所有结果列表
      })
      http.get('http://192.168.159.240:25005/uranus/metrics/project/refresh'+'?uuid='+'4cea96fc-e50f-4839-8ec8-0c114497d73b').then(({data})=>{
        //请求刷新指定工程指标
      })
      http.get('http://192.168.159.240:25005/uranus/bom/cyclonedx/project'+'?uuid='+'4cea96fc-e50f-4839-8ec8-0c114497d73b').then(({data})=>{
        //以标准格式返回指定工程依赖元数据
      })
    }
  },
  mounted() {
    //待更改为getList http形式
    this.getList()

  },
  computed: {
    // 这里定义上传文件时携带的参数，即表单数据
    upData: function () {
      return {
        /*projectId: Cookie.get("projectId"),*/
        /*body: JSON.stringify(this.form)*/
      }
    }
  },
//123123
}
</script>

<style scoped lang="less">

</style>
